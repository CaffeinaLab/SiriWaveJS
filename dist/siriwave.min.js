var SiriWave=function(){"use strict";function y(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}var w=function(){function i(t){y(this,i),this.ctrl=t.ctrl,this.definition=t.definition}return t(i,[{key:"_globAttenuationEquation",value:function(t){return Math.pow(4/(4+Math.pow(t,4)),4)}},{key:"_xpos",value:function(t){return this.ctrl.width/2+t*(this.ctrl.width/4)}},{key:"_ypos",value:function(t){var i=this.ctrl.heightMax*this.ctrl.amplitude/this.definition.attenuation;return this.ctrl.height/2+this._globAttenuationEquation(t)*i*Math.sin(this.ctrl.opt.frequency*t-this.ctrl.phase)}},{key:"draw",value:function(){var t=this.ctrl.ctx;t.moveTo(0,0),t.beginPath(),t.strokeStyle="rgba("+this.ctrl.color+","+this.definition.opacity+")",t.lineWidth=this.definition.lineWidth;for(var i=-this.ctrl.MAX_X;i<=this.ctrl.MAX_X;i+=this.ctrl.opt.pixelDepth){var e=this._ypos(i);1.9<=Math.abs(i)&&(e=this.ctrl.height/2),t.lineTo(this._xpos(i),e)}t.stroke()}}],[{key:"getDefinition",value:function(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}]),i}(),m=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};y(this,i),this.ctrl=t.ctrl,this.definition=t.definition,this.tick=0,this._respawn()}return t(i,[{key:"_respawn",value:function(){this.amplitude=.3+.7*Math.random(),this.seed=Math.random(),this.openClass=2+3*Math.random()|0}},{key:"_ypos",value:function(t){var i=-1*Math.abs(Math.sin(this.tick))*this.ctrl.amplitude*this.amplitude*this.ctrl.heightMax*Math.pow(1/(1+Math.pow(this.openClass*t,2)),2);return Math.abs(i)<this.ctrl.DEAD_THRESHOLD&&this._respawn(),i}},{key:"_draw",value:function(t){var i=this.ctrl.ctx;this.tick+=this.ctrl.speed*(1-.5*Math.sin(this.seed*Math.PI)),i.beginPath();for(var e,n,a,r=this.ctrl.width/2+(-this.ctrl.width/4+this.seed*(this.ctrl.width/2)),o=this.ctrl.height/2,s=-this.ctrl.MAX_X;s<=this.ctrl.MAX_X;s+=this.ctrl.opt.pixelDepth)e=r+s*(this.ctrl.width/4),n=o+t*this._ypos(s),null==a&&(a=e),i.lineTo(e,n);var h=Math.abs(this._ypos(0)),l=i.createRadialGradient(r,o,1.15*h,r,o,.3*h);l.addColorStop(0,"rgba("+this.definition.color+", 0.4)"),l.addColorStop(1,"rgba("+this.definition.color+", 0.2)"),i.fillStyle=l,i.lineTo(a,o),i.closePath(),i.fill()}},{key:"draw",value:function(){this._draw(-1),this._draw(1)}}],[{key:"getDefinition",value:function(){return[{color:"32,133,252"},{color:"94,252,169"},{color:"253,71,103"}]}}]),i}(),i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};for(var e,a=(function(o){(function(){var t,i,e,n,a,r;"undefined"!=typeof performance&&null!==performance&&performance.now?o.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(o.exports=function(){return(t()-a)/1e6},i=process.hrtime,n=(t=function(){var t;return 1e9*(t=i())[0]+t[1]})(),r=1e9*process.uptime(),a=n-r):e=Date.now?(o.exports=function(){return Date.now()-e},Date.now()):(o.exports=function(){return(new Date).getTime()-e},(new Date).getTime())}).call(i)}(e={exports:{}},e.exports),e.exports),r="undefined"==typeof window?i:window,o=["moz","webkit"],s="AnimationFrame",h=r["request"+s],l=r["cancel"+s]||r["cancelRequest"+s],c=0;!h&&c<o.length;c++)h=r[o[c]+"Request"+s],l=r[o[c]+"Cancel"+s]||r[o[c]+"CancelRequest"+s];if(!h||!l){var u=0,p=0,d=[];h=function(t){if(0===d.length){var i=a(),e=Math.max(0,1e3/60-(i-u));u=e+i,setTimeout(function(){for(var t=d.slice(0),i=d.length=0;i<t.length;i++)if(!t[i].cancelled)try{t[i].callback(u)}catch(t){setTimeout(function(){throw t},0)}},Math.round(e))}return d.push({handle:++p,callback:t,cancelled:!1}),p},l=function(t){for(var i=0;i<d.length;i++)d[i].handle===t&&(d[i].cancelled=!0)}}var f=function(t){return h.call(r,t)};return f.cancel=function(){l.apply(r,arguments)},f.polyfill=function(t){t||(t=r),t.requestAnimationFrame=h,t.cancelAnimationFrame=l},function(){function v(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(y(this,v),this.container=t.container||document.body,this.opt=Object.assign({style:"ios",ratio:window.devicePixelRatio||1,speed:.2,amplitude:1,frequency:6,color:"#fff",speedInterpolationSpeed:.005,amplitudeInterpolationSpeed:.005,cover:!1,width:window.getComputedStyle(this.container).width.replace("px",""),height:window.getComputedStyle(this.container).height.replace("px",""),autostart:!1,pixelDepth:.01},t),this.MAX_X=2,this.DEAD_THRESHOLD=.001,this.phase=0,this.run=!1,this.speed=Number(this.opt.speed),this.amplitude=Number(this.opt.amplitude),this.width=Number(this.opt.ratio*this.opt.width),this.height=Number(this.opt.ratio*this.opt.height),this.heightMax=Number(this.height/2)-4,this.color=this._hex2rgb(this.opt.color),this.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,!0===this.opt.cover?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=this.width/this.opt.ratio+"px",this.canvas.style.height=this.height/this.opt.ratio+"px"),this.curves=[],"ios9"===this.opt.style){var i=3*Math.random()|0,e=!0,n=!1,a=void 0;try{for(var r,o=m.getDefinition()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0)for(var s=r.value,h=0;h<i;h++)this.curves.push(new m({ctrl:this,definition:s}))}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}}else{var l=!0,c=!1,u=void 0;try{for(var p,d=w.getDefinition()[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var f=p.value;this.curves.push(new w({ctrl:this,definition:f}))}}catch(t){c=!0,u=t}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}}this.container.appendChild(this.canvas),t.autostart&&this.start()}return t(v,[{key:"_hex2rgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,i,e,n){return i+i+e+e+n+n});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?parseInt(i[1],16).toString()+","+parseInt(i[2],16).toString()+","+parseInt(i[3],16).toString():null}},{key:"_interpolate",value:function(t){var i=this.opt[t+"InterpolationSpeed"];if(null==i)throw new Error("Unable to retrieve increment for: "+t);if(!(Math.abs(this.interpolation[t]-this[t])<=i))return this.interpolation[t]>this[t]?this[t]+=i:this[t]-=i,this[t];this[t]=this.interpolation[t]}},{key:"_clear",value:function(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}},{key:"_draw",value:function(){var t=!0,i=!1,e=void 0;try{for(var n,a=this.curves[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){n.value.draw()}}catch(t){i=!0,e=t}finally{try{t||null==a.return||a.return()}finally{if(i)throw e}}}},{key:"_startDrawCycle",value:function(){!1!==this.run&&(this._clear(),this._interpolate("amplitude"),this._interpolate("speed"),this._draw(),this.phase=(this.phase+Math.PI*this.opt.speed)%(2*Math.PI),f(this._startDrawCycle.bind(this)))}},{key:"start",value:function(){this.phase=0,this.run=!0,this._startDrawCycle()}},{key:"stop",value:function(){this.phase=0,this.run=!1}},{key:"setSpeed",value:function(t){this.interpolation.speed=t}},{key:"setAmplitude",value:function(t){this.interpolation.amplitude=Math.max(Math.min(t,1),0)}}]),v}()}();
