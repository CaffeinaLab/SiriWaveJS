!function(t,e,i,n){(i=t.createElement(e)).async=1,i.src="//"+(location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",(n=t.getElementsByTagName(e)[0]).parentNode.insertBefore(i,n)}(document,"script"),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SiriWave=e()}(this,function(){"use strict";function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function t(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}var v=function(){function e(t){d(this,e),this.ctrl=t.ctrl,this.definition=t.definition,this.ATT_FACTOR=4,this.GRAPH_X=2,this.AMPLITUDE_FACTOR=.6}return t(e,[{key:"_globalAttFn",value:function(t){return Math.pow(this.ATT_FACTOR/(this.ATT_FACTOR+Math.pow(t,this.ATT_FACTOR)),this.ATT_FACTOR)}},{key:"_xpos",value:function(t){return this.ctrl.width*((t+this.GRAPH_X)/(2*this.GRAPH_X))}},{key:"_ypos",value:function(t){return this.AMPLITUDE_FACTOR*(this._globalAttFn(t)*(this.ctrl.heightMax*this.ctrl.amplitude)*(1/this.definition.attenuation)*Math.sin(this.ctrl.opt.frequency*t-this.ctrl.phase))}},{key:"draw",value:function(){var t=this.ctrl.ctx;t.moveTo(0,0),t.beginPath(),t.strokeStyle="rgba("+this.ctrl.color+","+this.definition.opacity+")",t.lineWidth=this.definition.lineWidth;for(var e=-this.GRAPH_X;e<=this.GRAPH_X;e+=this.ctrl.opt.pixelDepth)t.lineTo(this._xpos(e),this.ctrl.heightMax+this._ypos(e));t.stroke()}}],[{key:"getDefinition",value:function(){return[{attenuation:-2,lineWidth:1,opacity:.1},{attenuation:-6,lineWidth:1,opacity:.2},{attenuation:4,lineWidth:1,opacity:.4},{attenuation:2,lineWidth:1,opacity:.6},{attenuation:1,lineWidth:1.5,opacity:1}]}}]),e}();var e=function(t,e,i){return t*(1-i)+e*i},_=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};d(this,e),this.ctrl=t.ctrl,this.definition=t.definition,this.GRAPH_X=4,this.AMPLITUDE_FACTOR=2,this.SPEED_FACTOR=1,this.DEAD_PX=1,this.NOOFCURVES_RANGES=[3,6],this.AMPLITUDE_RANGES=[.1,.6],this.SPEED_RANGES=[.6,1],this.OFFSET_RANGES=[-this.GRAPH_X/2,this.GRAPH_X/2],this.PARAMS_RANGES=[1,2],this.PADDING_PX=.1*this.ctrl.width,this.MAX_WIDTH_PX=this.ctrl.width-2*this.PADDING_PX,this.MAX_WIDTH_EACH_CURVE_PX=.7*this.MAX_WIDTH_PX,this.xBasePoint=this.ctrl.width/2+(1==(2*Math.random()|0)?1:-1)*(Math.random()*this.PADDING_PX),this._respawn()}return t(e,[{key:"_getRandomRange",value:function(t){return t[0]+Math.random()*(t[1]-t[0])}},{key:"_respawnSingle",value:function(t){this.phases[t]=0,this.offsets[t]=this._getRandomRange(this.OFFSET_RANGES),this.speeds[t]=this._getRandomRange(this.SPEED_RANGES),this.amplitudes[t]=this._getRandomRange(this.AMPLITUDE_RANGES),this.params[t]=this._getRandomRange(this.PARAMS_RANGES)}},{key:"_respawn",value:function(){this.spawnAt=Date.now(),this.noOfCurves=this.NOOFCURVES_RANGES[Math.random()*this.NOOFCURVES_RANGES|0],this.phases=new Array(this.noOfCurves),this.offsets=new Array(this.noOfCurves),this.speeds=new Array(this.noOfCurves),this.amplitudes=new Array(this.noOfCurves),this.params=new Array(this.noOfCurves);for(var t=0;t<this.noOfCurves;t++)this._respawnSingle(t)}},{key:"_ypos",value:function(t){for(var e=0,i=0;i<this.noOfCurves;i++){var n=t+this.offsets[i];e+=Math.abs(Math.sin(this.phases[i])*this.amplitudes[i]*Math.pow(1/(1+Math.pow(this.params[i]*n,2)),2))}return e/=this.noOfCurves,this.AMPLITUDE_FACTOR*this.ctrl.heightMax*this.ctrl.amplitude*e}},{key:"_xpos",value:function(t){return t/this.GRAPH_X*this.MAX_WIDTH_EACH_CURVE_PX}},{key:"draw",value:function(){var t=this.ctrl.ctx;if(t.globalAlpha=.5,t.globalCompositeOperation="lighter",this.definition.supportLine){var e=[0,this.ctrl.heightMax,this.ctrl.width,1],i=t.createLinearGradient.apply(t,e);return i.addColorStop(0,"transparent"),i.addColorStop(.1,"rgba(255,255,255,.5)"),i.addColorStop(.8,"rgba(255,255,255,.5)"),i.addColorStop(1,"transparent"),t.fillStyle=i,void t.fillRect.apply(t,e)}for(var n=0;n<this.noOfCurves;n++)this.phases[n]+=this.SPEED_FACTOR*this.ctrl.speed*this.speeds[n]*Math.random();var s=this._ypos(0);if(s<this.DEAD_PX&&this.prevMaxY>s)return this.prevMaxY=s,void this._respawn();this.prevMaxY=s;for(var r=[1,-1],a=0;a<r.length;a++){var o=r[a];t.beginPath();for(var h=-this.GRAPH_X;h<=this.GRAPH_X;h+=this.ctrl.opt.pixelDepth){var l=this._xpos(h),c=o*this._ypos(h);t.lineTo(this.xBasePoint+l,this.ctrl.heightMax+c)}t.lineTo(this.xBasePoint-this.MAX_WIDTH_EACH_CURVE_PX,this.ctrl.heightMax+0),t.closePath();t.createLinearGradient(this.xBasePoint-this.MAX_WIDTH_EACH_CURVE_PX,0,this.xBasePoint+this.MAX_WIDTH_EACH_CURVE_PX,this.ctrl.heightMax);t.fillStyle="rgba("+this.definition.color+", 1)",t.fill()}}}],[{key:"getDefinition",value:function(){return[{color:"255,255,255",supportLine:!0},{color:"12, 107, 192"},{color:"135, 46, 76"},{color:"73, 226, 158"}]}}]),e}(),i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};for(var s,r=(function(a){(function(){var t,e,i,n,s,r;"undefined"!=typeof performance&&null!==performance&&performance.now?a.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(a.exports=function(){return(t()-s)/1e6},e=process.hrtime,n=(t=function(){var t;return 1e9*(t=e())[0]+t[1]})(),r=1e9*process.uptime(),s=n-r):i=Date.now?(a.exports=function(){return Date.now()-i},Date.now()):(a.exports=function(){return(new Date).getTime()-i},(new Date).getTime())}).call(i)}(s={exports:{}},s.exports),s.exports),a="undefined"==typeof window?i:window,o=["moz","webkit"],h="AnimationFrame",l=a["request"+h],c=a["cancel"+h]||a["cancelRequest"+h],u=0;!l&&u<o.length;u++)l=a[o[u]+"Request"+h],c=a[o[u]+"Cancel"+h]||a[o[u]+"CancelRequest"+h];if(!l||!c){var p=0,f=0,y=[];l=function(t){if(0===y.length){var e=r(),i=Math.max(0,1e3/60-(e-p));p=i+e,setTimeout(function(){for(var t=y.slice(0),e=y.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(p)}catch(t){setTimeout(function(){throw t},0)}},Math.round(i))}return y.push({handle:++f,callback:t,cancelled:!1}),f},c=function(t){for(var e=0;e<y.length;e++)y[e].handle===t&&(y[e].cancelled=!0)}}var A=function(t){return l.call(a,t)};return A.cancel=function(){c.apply(a,arguments)},A.polyfill=function(t){t||(t=a),t.requestAnimationFrame=l,t.cancelAnimationFrame=c},function(){function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(d(this,f),this.container=t.container||document.body,this.opt=Object.assign({style:"ios",ratio:window.devicePixelRatio||1,speed:.2,amplitude:1,frequency:6,color:"#fff",speedInterpolationSpeed:.05,amplitudeInterpolationSpeed:.005,cover:!1,width:window.getComputedStyle(this.container).width.replace("px",""),height:window.getComputedStyle(this.container).height.replace("px",""),autostart:!1,pixelDepth:.02,lerpSpeed:.1},t),this.phase=0,this.run=!1,this.speed=Number(this.opt.speed),this.amplitude=Number(this.opt.amplitude),this.width=Number(this.opt.ratio*this.opt.width),this.height=Number(this.opt.ratio*this.opt.height),this.heightMax=Number(this.height/2)-6,this.color=this._hex2rgb(this.opt.color),this.interpolation={speed:this.speed,amplitude:this.amplitude},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,!0===this.opt.cover?this.canvas.style.width=this.canvas.style.height="100%":(this.canvas.style.width=this.width/this.opt.ratio+"px",this.canvas.style.height=this.height/this.opt.ratio+"px"),this.curves=[],"ios9"===this.opt.style){var e=!0,i=!1,n=void 0;try{for(var s,r=_.getDefinition()[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var a=s.value;this.curves.push(new _({ctrl:this,definition:a}))}}catch(t){i=!0,n=t}finally{try{e||null==r.return||r.return()}finally{if(i)throw n}}}else{var o=!0,h=!1,l=void 0;try{for(var c,u=v.getDefinition()[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var p=c.value;this.curves.push(new v({ctrl:this,definition:p}))}}catch(t){h=!0,l=t}finally{try{o||null==u.return||u.return()}finally{if(h)throw l}}}this.container.appendChild(this.canvas),t.autostart&&this.start()}return t(f,[{key:"_hex2rgb",value:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?parseInt(e[1],16).toString()+","+parseInt(e[2],16).toString()+","+parseInt(e[3],16).toString():null}},{key:"_lerp",value:function(t){return this[t]=e(this[t],this.interpolation[t],this.opt.lerpSpeed),this[t]}},{key:"_clear",value:function(){this.ctx.globalCompositeOperation="destination-out",this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="source-over"}},{key:"_draw",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,s=this.curves[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){n.value.draw()}}catch(t){e=!0,i=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw i}}}},{key:"_startDrawCycle",value:function(){!1!==this.run&&(this._clear(),this._lerp("amplitude"),this._lerp("speed"),this._draw(),this.phase=(this.phase+Math.PI/2*this.speed)%(2*Math.PI),A(this._startDrawCycle.bind(this)))}},{key:"start",value:function(){this.phase=0,this.run=!0,this._startDrawCycle()}},{key:"stop",value:function(){this.phase=0,this.run=!1}},{key:"set",value:function(t,e){this.interpolation[t]=Number(e)}},{key:"setSpeed",value:function(t){this.set("speed",t)}},{key:"setAmplitude",value:function(t){this.set("amplitude",t)}}]),f}()});
